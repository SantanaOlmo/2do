<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Reproductor con timeline draggable y clicable</title>
<link rel="stylesheet" href="styles/style.css">

</head>
<body>

<h2>Reproductor con timeline draggable y clicable</h2>

<audio id="audio" src="assets/dAs909.mp3"></audio><br>
<button id="playPause">Play / Pause</button>

<div id="timelineContainer">
  <div id="progress"></div>
  <div id="handle"></div>
</div>

<script>
const audio = document.getElementById('audio');
const playPause = document.getElementById('playPause');
const timeline = document.getElementById('timelineContainer');
const progress = document.getElementById('progress');
const handle = document.getElementById('handle');

playPause.addEventListener('click', () => {
    if(audio.paused) audio.play();
    else audio.pause();
});

// Actualiza barra y handle mientras suena
audio.addEventListener('timeupdate', () => {
    const percent = (audio.currentTime / audio.duration) * 100;
    progress.style.width = percent + '%';
    handle.style.left = `calc(${percent}% - 5px)`; // -5px para centrar el handle
});

// Drag del handle
let isDragging = false;

handle.addEventListener('mousedown', () => isDragging = true);
document.addEventListener('mouseup', () => isDragging = false);
document.addEventListener('mousemove', (e) => {
    if(!isDragging) return;
    const rect = timeline.getBoundingClientRect();
    let x = e.clientX - rect.left;
    if(x < 0) x = 0;
    if(x > rect.width) x = rect.width;
    const percent = x / rect.width;
    audio.currentTime = percent * audio.duration;
});

// Click en la barra
timeline.addEventListener('click', (e) => {
    const rect = timeline.getBoundingClientRect();
    let x = e.clientX - rect.left;
    if(x < 0) x = 0;
    if(x > rect.width) x = rect.width;
    const percent = x / rect.width;
    audio.currentTime = percent * audio.duration;
});
</script>

</body>
</html>
